# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
cdrom
lang en_US.UTF-8
keyboard us
network --onboot yes --device eth0 --bootproto dhcp
rootpw  --iscrypted $6$AGkP8JeD2kANvyZE$KtuuBIqQdUFGLx7cJhrE6./q2erjyG26XKC6qU4M4ianrTrTF1LnKKs6ssK7yYrJ3yfGyHX79SxMKT.cYBSe..
user --name=vagrant --password=vagrant
# Reboot after installation
reboot
firewall --disabled
authconfig --enableshadow --passalgo=sha512 --kickstart
selinux --permissive
timezone UTC
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb quiet"


# Format the partitions/mbr first
zerombr 
clearpart --all --initlabel

# Create primary partitions on first disk
part /boot --fstype "ext4" --size=512 --asprimary
part swap --fstype swap --size=4096

# Create logical partitions on disk sda
part pv.0 --size=1 --grow --ondisk=sda
volgroup rootVG pv.0
logvol /     --fstype ext4 --name=root --vgname=rootVG --size=2560 --grow
#logvol /tmp  --fstype ext4 --name=temp --vgname=rootVG --size=256 --fsoptions="nodev,noexec,nosuid"
#logvol /home --fstype ext4 --name=home --vgname=rootVG --size=1024 --fsoptions="nodev"
#logvol /var  --fstype ext4 --name=var  --vgname=rootVG --size=1024 --fsoptions="nodev"
#logvol /var/log --fstype ext4 --name=varlog --vgname=rootVG --size=512 --fsoptions="nodev,noexec,nosuid"
#logvol /var/log/audit --fstype ext4 --name=audit --vgname=rootVG --size=256 --fsoptions="nodev,noexec,nosuid"

# Create more logical partitions on disk sdb
#part pv.1 --size=1 --grow --ondisk=sdb
#volgroup dataVG pv.1
#logvol /var     --fstype ext4 --name=root --vgname=dataVG --size=2560 --grow


#repo --name="CentOS"  --baseurl=cdrom:sr0 --cost=100

%packages --excludedocs --nobase --ignoremissing
@Core
gcc
kernel-devel
kernel-headers
make
nfs-utils
openssh-clients
perl
sudo
wget
-aic94xx-firmware
-atmel-firmware
-b43-openfwwf
-bfa-firmware
-fprintd-pam
-intltool
-ipw2100-firmware
-ipw2200-firmware
-ivtv-firmware
-iwl100-firmware
-iwl1000-firmware
-iwl3945-firmware
-iwl4965-firmware
-iwl5000-firmware
-iwl5150-firmware
-iwl6000-firmware
-iwl6000g2a-firmware
-iwl6050-firmware
-libertas-usb8388-firmware
-ql2100-firmware
-ql2200-firmware
-ql23xx-firmware
-ql2400-firmware
-ql2500-firmware
-rt61pci-firmware
-rt73usb-firmware
-xorg-x11-drv-ati-firmware
-zd1211-firmware

%end

%post
# Force to set SELinux to a permissive mode
sed -i -e 's/\(^SELINUX=\).*$/\1permissive/' /etc/selinux/config
# sudo
echo "%vagrant ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers.d/vagrant
sed -i "s/^.*requiretty/#Defaults requiretty/" /etc/sudoers
/bin/mkdir -p /home/vagrant/.ssh
/bin/chmod 700 /home/vagrant/.ssh
/bin/cat << EOF > /home/vagrant/.sshauthorized_keys
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaw8CnyJrfc1PME+uKpV3QC9iiSG2wp9dyJZ1HiWnkNb9h/gn0Wmi6aLhxu5sNTvU+sUIEa8E96/ZPUXY5YIdJTMDk0vCZFEMjXOTdjmSU1S86chi2RcNTWZAWxzM2oiQr6WnKSeNjXR5e6oDA2XRadRdZrBrkAh8ME+Jf5fVPA0QNOW8Aeeq/ugNaPP5OIaLA2iAowikkQak/6ZNDNtc/D7nrbAoG20Cxl1v0zY7e+1abCLiuUFEriGuVLn2/kSFvhq+cDJdXe6oO/GAMoJXGmMQl63ip2beY/O8llLbNMgSXUV/pAQHdy2bZ4zoOkzauedIKbAit03nQKgDlB0r3 manuel@manuelalvarenga.local
EOF
/bin/cat << EOF > /home/vagrant/id_rsa
-----BEGIN RSA PRIVATE KEY-----
MIIEpgIBAAKCAQEA2sPAp8ia33NTzBPriqVd0AvYokhtsKfXciWdR4lp5DW/Yf4J
9Fpoumi4cbubDU71PrFCBGvBPev2T1F2OWCHSUzA5NLwmRRDI1zk3Y5klNUvOnIY
tkXDU1mQFsczNqIkK+lpyknjY10eXuqAwNl0WnUXWawa5AIfDBPiX+X1TwNEDTlv
AHnqv7oDWjz+TiGiwNogKMIpJEGpP+mTQzbXPw+562wKBttAsZdb9M2O3vtWmwi4
rlBRK4hrlS59v5Ehb4avnAyXV3uqDvxgDKCVxpjEJet4qdm3mPzvJZS2zTIEl1Ff
6QEB3ctm2eM6DpM2rnnSCmwIrdN50CoA5QdK9wIDAQABAoIBAQDX7kBLXIcB6CPe
XAsyXueqYwcBp9wdco4F7XrBEbGjwCmX39iTiGm3FYZ5PGRfToBj0TMIihPDuxT0
VcQL/muKvmfndQ5nCsj6Lsb4qYQ+I+7qEZSy1UlnDBBda2Hxmzl43nu9YBFCErfX
mEBeGkXuw4S4zlf8lttuYHIhlin8QbnLGt+LtAa5phEP/O9K+jZkgKQVVhPaD1NN
wjlUIUmTE1Q/V62Ti+zYryZD7uDbULRAT9JrVdgEC/c/aN7Wi8RON6mXcLfe1bve
8509L5nruyYE4wvmvtVyEa0BpxZFOwcCqiM23wcvyQsaQjoxA1eAI6+q3VA6nQYD
Z0j4enuBAoGBAO3N3yivCyN4TN4gX9VkOAe2F3k432fMl8m6VjE61fA/IvniiE55
hBn4o0A9IDy7VzvjGGSyLh9yvtJd2QxLzSYwtZNo2roX21XS82euSn6L6+mPwHr0
7B7nJBR+QSr+eT0W/7qqnnToJ8QW0ON1HqFzfvsi1BjaRlbhrsmf1tdLAoGBAOuA
7tfMw75L/39OMoRg+oGn9FLjf4+SqiMIHkcIlvxym7xaBItSWkCaEc8m+NeDPz0I
l2q8Vpv+7fZgjd4cR5RP3Z3Rc8hKp0B12P09rRA4H1QIbGWTMyLamLceSYKkChif
V0H0e4GRFlPKLIjs64a3a91+4BOycjknq1pZoLOFAoGBANBCswRbQEMBETibW7Jz
gYpnU2lrgGPUTr5xfRjCMSik8omrdbpcO2/PS5FvtvLZEs201eEiFrid8jYj0Hkv
TWv7zplZg+zkBcfE5jxP7JelDKdQqL5GDyAFR5jW9VWk5SK2KKIe2IUD6AeX/7qk
EH5Ous9PsjZNurpODZgwbqO/AoGBAKPqPtOnKwsVvISwOcsX8OQzsYPL4qpcq9zs
Np68ZNLbNnhXs1gBft3+Hq0vc/4U1Pw3MaTR5/p16s0UkUnqJwwctqS090CObXEZ
VWmV9xIV7gBASKo+VVZKDgdOpl2urXRL26EFeL1K7d5uFqdLN/exTPuC5pXvGz+a
09J0Fb09AoGBAOKWClYrOBRGsrCrm179/XEPlGvN+XG6ZH0VzASUQpb9l3xPiOu8
bkZq5WMhkxIdag2jTwdnQJkFeKTSpwPZJJIljykpCntkMoi7x0r0AvDlDGcpGNEg
b4s6RiMyKlIvhnOOpOORkaYs4ydXCLzSA1c5MeTa2WRXsIbG/Ru06GNV
-----END RSA PRIVATE KEY-----
EOF
/bin/chown -R vagrant:vagrant /home/vagrant/.ssh
/bin/chmod 0400 /home/vagrant/.ssh/*





%end